<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alex Strick van Linschoten">
<meta name="dcterms.date" content="2023-07-23">
<meta name="description" content="I built a tool to help me practice the parts of mathematics that I find hardest. I also have been reading some books about Rust and I also wanted to play around with that so used it for the server / backend.">

<title>Building MathsPrompt: a tool to help me review and practice problems for my degree ‚Äì Alex Strick van Linschoten</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script defer="" data-domain="alexstrick.com" src="https://plausible.io/js/script.js"></script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Building MathsPrompt: a tool to help me review and practice problems for my degree ‚Äì Alex Strick van Linschoten">
<meta property="og:description" content="I built a tool to help me practice the parts of mathematics that I find hardest. I also have been reading some books about Rust and I also wanted to play around with that so used it for the server / backend.">
<meta property="og:image" content="https://alexstrick.com/posts/images/mathsprompt/rust-mathsprompt-cover.png">
<meta property="og:site_name" content="Alex Strick van Linschoten">
<meta property="og:image:height" content="500">
<meta property="og:image:width" content="500">
<meta name="twitter:title" content="Building MathsPrompt: a tool to help me review and practice problems for my degree ‚Äì Alex Strick van Linschoten">
<meta name="twitter:description" content="I built a tool to help me practice the parts of mathematics that I find hardest. I also have been reading some books about Rust and I also wanted to play around with that so used it for the server / backend.">
<meta name="twitter:image" content="https://alexstrick.com/posts/images/mathsprompt/rust-mathsprompt-cover.png">
<meta name="twitter:creator" content="@strickvl">
<meta name="twitter:image-height" content="500">
<meta name="twitter:image-width" content="500">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Alex Strick van Linschoten</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Technical</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../personal.html"> 
<span class="menu-text">Personal</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../til.html"> 
<span class="menu-text">TIL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/strickvl"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://sigmoid.social/web/@alexstrick"> <i class="bi bi-mastodon" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/strickvl"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-rss" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">RSS</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-rss">    
        <li>
    <a class="dropdown-item" href="../index.xml">
 <span class="dropdown-text">Technical RSS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../personal.xml">
 <span class="dropdown-text">Personal RSS</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Building MathsPrompt: a tool to help me review and practice problems for my degree</h1>
                  <div>
        <div class="description">
          I built a tool to help me practice the parts of mathematics that I find hardest. I also have been reading some books about Rust and I also wanted to play around with that so used it for the server / backend.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">openai</div>
                <div class="quarto-category">llms</div>
                <div class="quarto-category">mathematics</div>
                <div class="quarto-category">rust</div>
                <div class="quarto-category">mu123</div>
                <div class="quarto-category">q31</div>
                <div class="quarto-category">skillbuilding</div>
                <div class="quarto-category">softwareengineering</div>
                <div class="quarto-category">tools</div>
                <div class="quarto-category">miniproject</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Alex Strick van Linschoten </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 23, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introducing-mathsprompt" id="toc-introducing-mathsprompt" class="nav-link active" data-scroll-target="#introducing-mathsprompt">üßÆ Introducing MathsPrompt</a></li>
  <li><a href="#my-tool-cabinet" id="toc-my-tool-cabinet" class="nav-link" data-scroll-target="#my-tool-cabinet">üî® My tool cabinet</a>
  <ul class="collapse">
  <li><a href="#why-rust" id="toc-why-rust" class="nav-link" data-scroll-target="#why-rust">Why Rust?</a></li>
  <li><a href="#chatgpt-to-generate-question-variations" id="toc-chatgpt-to-generate-question-variations" class="nav-link" data-scroll-target="#chatgpt-to-generate-question-variations">ü§ñ ChatGPT to generate question variations</a></li>
  </ul></li>
  <li><a href="#what-i-built" id="toc-what-i-built" class="nav-link" data-scroll-target="#what-i-built">üë∑ What I Built</a>
  <ul class="collapse">
  <li><a href="#frontend-web-ui" id="toc-frontend-web-ui" class="nav-link" data-scroll-target="#frontend-web-ui">Frontend / Web UI</a></li>
  <li><a href="#rust-server-backend" id="toc-rust-server-backend" class="nav-link" data-scroll-target="#rust-server-backend">üñ•Ô∏è Rust Server / Backend</a></li>
  <li><a href="#postgresql-database" id="toc-postgresql-database" class="nav-link" data-scroll-target="#postgresql-database">üíæ PostgreSQL Database</a></li>
  </ul></li>
  <li><a href="#which-cards-to-review" id="toc-which-cards-to-review" class="nav-link" data-scroll-target="#which-cards-to-review">ü§î Which cards to review?</a></li>
  <li><a href="#what-i-learned" id="toc-what-i-learned" class="nav-link" data-scroll-target="#what-i-learned">üí° What I learned</a></li>
  <li><a href="#whats-next-for-mathsprompt" id="toc-whats-next-for-mathsprompt" class="nav-link" data-scroll-target="#whats-next-for-mathsprompt">üßë‚Äçüíª What‚Äôs next for MathsPrompt</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><strong>TL;DR:</strong></p>
<ul>
<li>I built a little app in Rust to help me revise and practice mathematics exercises.</li>
<li>I input questions I‚Äôve already studied / completed and the app gets more questions autogenerated via OpenAI‚Äôs GPT-4 API.</li>
<li>All of this populates a database which is then queried to show me the questions and topic areas where I‚Äôm least confident.</li>
<li>It‚Äôs just v0.1 but I was surprised at how much I could get done in an evening.</li>
</ul>
<p>Last week I received the results for the MU123 module of <a href="https://www.open.ac.uk/courses/maths/degrees/bsc-mathematics-q31">my Open University Maths degree</a>. I was really happy to have achieved a distinction. The course starts off slowly ‚Äî one of the reasons I went with the OU ‚Äî but there was still a lot of work that went into that grade. I used a combination of study techniques to revise and cement my understanding along the way, but a core tenet of how I study anything is spaced repetition. (I actually care so much about spaced repetition that I‚Äôm one of the co-founders of the <a href="https://www.spacedrepfoundation.org/about">Spaced Repetition Foundation</a> and have <a href="https://www.alexstrick.com/blog/tag/spaced+repetition#show-archive">written about it a fair bit over on my other blog</a>.) For my maths work thus far this has meant creating a not insignificant quantity of <a href="http://ankisrs.net">Anki</a> cards. (Just checked and I have 673 cards that I created for that first module.)</p>
<p>When I posted about my degree on LinkedIn, Matt Squire from the always-worth-following <a href="https://www.fuzzylabs.ai">FuzzyLabs</a> (seriously, <a href="https://www.fuzzylabs.ai/blog">check out their blog</a>!) replied:</p>
<p><img src="images/mathsprompt/matt-linkedin.png" class="img-fluid"></p>
<p>He was referring to <a href="http://www.languagecoach.io/coachbot">CoachBot</a>, another web tool I built to scratch a personal itch around getting study prompts when learning a language outside a classroom/group environment.</p>
<p>Alongside my use of Anki to cement the more fact-y parts of the things that I‚Äôm studying, I‚Äôve been a consistent user of ChatGPT to supplement the practice questions that my course gives me. As part of the Open University course, you get access to some practice questions that (I think) are generated from templates. The advantage of using those is that the system will grade your answer, but it‚Äôs pretty rigid / inflexible to use and you can only practice in the sandbox of one particular unit or topic so you miss out on all the very real benefits of interleaved practice. (Interleaved practice is making sure that you mix up the topics and things that you‚Äôre studying so that you switch e.g.&nbsp;from your Chinese vocabulary to your maths to whatever else it is that you‚Äôre studying. You‚Äôll learn the materials far better if you do your retrieval practice using interleaving than if you study just one topic in isolation, then another topic in isolation and so on.)</p>
<p>There was also no way in the OU system to really get a sense of how strong you are in the different areas beyond just the static once-done-instantly-forgotten end of unit exams and tests. Thus the tool available to me didn‚Äôt handle spaced repetition or interleaving, two core parts of what have been shown to be good study techniques / foundations.</p>
<p>What I really wanted was:</p>
<ul>
<li>a way to get practice questions for things that I‚Äôve studied in maths already</li>
<li>a service that would show me the things that I found most difficult more often than the things I found really easy</li>
<li>some way to encourage me to <em>do</em> maths instead of just read about it. (Lots of the skills vanish fairly quickly if you don‚Äôt regularly solve problems using them, I discovered.)</li>
</ul>
<section id="introducing-mathsprompt" class="level2">
<h2 class="anchored" data-anchor-id="introducing-mathsprompt">üßÆ Introducing MathsPrompt</h2>
<p>So that‚Äôs what I built :) MathsPrompt has three core modes. Firstly we have the core, a place you go to review the problems you‚Äôre studying:</p>
<p><img src="images/mathsprompt/mp-review.png" class="img-fluid"></p>
<p>This pretty closely replicates the interface you see when using Anki. You get a question to solve and then when you‚Äôve solved it you grade how easy you found the exercise. (Note that all we have here are prompts for things to solve. There aren‚Äôt any generated solutions to check against; most of the time all of this can be looked up fairly easily if need be.) Then depending on how easy or hard you found it, you‚Äôll see that prompt or exercise later or sooner. More on that later.</p>
<p>To populate the database of questions / prompts, we have the input screen which was actually the first thing I built.</p>
<p><img src="images/mathsprompt/mp-input.png" class="img-fluid"></p>
<p>You type or copy-paste in some maths exercise, give it some tags (per topic name or unit) and it‚Äôll add that question to the database. Then it‚Äôll send that question (embedded in a lovingly-crafted prompt) to <a href="https://chat.openai.com">ChatGPT</a> to get 5 more similar questions (but with different values / variables) and it‚Äôll then add those (with an <code>autogenerated</code> flag) to the database as well. This adds a little bit of variation into the mix and ensures that I‚Äôm actually getting to practice things I haven‚Äôt seen before.</p>
<p>Finally, we have a ‚ÄòFocus‚Äô mode where you can pick one of the tags that you want to specifically focus on (in a non-interleaved way) and you‚Äôll just get infinite random questions relating to that particular topic area:</p>
<p><img src="images/mathsprompt/mp-focus.png" class="img-fluid"></p>
<p>There are ways I‚Äôd like to improve this going forward (see below for those) but for now I‚Äôm happy with having this functional prototype to use in my studies. The data (in the form of my database) is completely separated out from the web interface so I can update and improve this without worrying that the questions I‚Äôve created and the answers I‚Äôve inputted will need to be restarted from scratch going forward.</p>
</section>
<section id="my-tool-cabinet" class="level1">
<h1>üî® My tool cabinet</h1>
<section id="why-rust" class="level2">
<h2 class="anchored" data-anchor-id="why-rust">Why Rust?</h2>
<p>I chose to build the project using <a href="https://www.rust-lang.org">Rust</a> as I‚Äôve been reading a couple of books over the past few months and I wanted a way to get my hands dirty. (Those two books, <a href="https://www.amazon.com/Rust-Action-TS-McNamara/dp/1617294551?tag=soumet-20">Rust in Action</a> by Tim McNamara and <a href="https://www.amazon.com/-/en/Ken-Youens-Clark/dp/1098109430/ref=d_pd_sim_sccl_2_3/259-8491770-0412405?tag=soumet-20&amp;pd_rd_r=c7e5134c-8cea-4954-acab-1eead741381c&amp;psc=1&amp;content-id=amzn1.sym.5cdc78f1-a757-4b8d-989e-a305d0a3dfbe&amp;pf_rd_r=FR7GR5R1YC93V3C51T7X&amp;pf_rd_p=5cdc78f1-a757-4b8d-989e-a305d0a3dfbe&amp;pd_rd_wg=k8Of0&amp;pd_rd_w=PDA2A&amp;pd_rd_i=1098109430">Command-Line Rust</a> by Ken Youens-Clark, were really great in getting me going / started.) Rust comes with a considerable reputation for its steep learning curve but I found that the passive understanding of syntax / workflows I‚Äôd developed by reading in those books coupled with ChatGPT was enough to get this project off the ground at a fast pace.</p>
<p>It certainly helped that I knew what I wanted to build and had thought through what the database schema as well as the core functionality on a few long train journeys recently with paper and pen in hand. It also probably helped that I‚Äôd had some previous exposure to and experience with <a href="https://go.dev/learn/">Golang</a> and that our Python development <a href="https://github.com/zenml-io/zenml">at work</a> happens in the context of <a href="https://mypy.readthedocs.io"><code>mypy</code></a> strict mode which is as close as Python gets to being forced to think through your code in terms of types.</p>
</section>
<section id="chatgpt-to-generate-question-variations" class="level2">
<h2 class="anchored" data-anchor-id="chatgpt-to-generate-question-variations">ü§ñ ChatGPT to generate question variations</h2>
<p>I considered going down the path of generating question templates for every question, and then having some random numbers get inserted into those templates, but for a lot of questions that wouldn‚Äôt have worked. For instance, within trigonometry there are lots of ways that the variables are somehow interrelated or some values wouldn‚Äôt make sense at all. The angles inside a triangle still need to sum up to 180 degrees, for example.</p>
<p>Despite a few misgivings and hesitations around GPT-4‚Äôs mathematical abilities (which have been <a href="https://www.cantorsparadise.com/gpt-4-is-amazing-but-still-struggles-at-high-school-math-competitions-cbc2e73738e">widely</a> <a href="https://www.reddit.com/r/singularity/comments/12bgsfu/mathematical_level_of_gpt4/">noted</a>) I figured it‚Äôs a quicker way to get going with this project than any other. Moreover, if I find I‚Äôm having issues with the quality of the autogenerated questions I can also just remove them from the set that get shown to me. It also added an extra piece of complexity to the project (and thus something new to learn) since I had to make those calls to the OpenAI API as part of the app.</p>
</section>
</section>
<section id="what-i-built" class="level1">
<h1>üë∑ What I Built</h1>
<p>There are three main pieces to what I put together, all interacting in the form / shape of the web app showcased above. All the code is <a href="https://github.com/strickvl/mathsprompt">available online in my public GitHub repository</a> so feel free to check that out!</p>
<section id="frontend-web-ui" class="level2">
<h2 class="anchored" data-anchor-id="frontend-web-ui">Frontend / Web UI</h2>
<p>I studied web development / engineering for 3 years at <a href="https://launchschool.com">Launch School</a> yet have very little interest in importing some framework behemoth into this project. Where possible I‚Äôm pragmatically and philosophically aligned towards simplicity so I chose just to make my site in <a href="https://github.com/strickvl/mathsprompt/tree/main/frontend">raw HTML, CSS and JavaScript</a>. Really nothing special there. Probably lots of things I could do to make the site look unique, but that can come later if at all. I was pleased that I got to use many of the things I‚Äôd learnt in the past for the JavaScript part, however!</p>
</section>
<section id="rust-server-backend" class="level2">
<h2 class="anchored" data-anchor-id="rust-server-backend">üñ•Ô∏è Rust Server / Backend</h2>
<p>All the server logic is captured <a href="https://github.com/strickvl/mathsprompt/blob/main/src/main.rs">in a single file</a> and this was a strong GPT-4 collaboration piece. I knew enough to tweak things once I had some basic code, but writing it from scratch is far beyond my personal abilities right now so I just iterated <em>many</em> times to get to this.</p>
<p>It‚Äôs all pretty simple. Most of the logic is around sending the text of the input question to OpenAI and then parsing whatever gets returned back. The server logic is all standard. I have no idea if <code>actix</code> is the standard for web servers in the Rust world but it was what ChatGPT recommended so I went with it and it was easy to get my heard round setting up the endpoints and plugging in the logic for what happens when requests came in.</p>
</section>
<section id="postgresql-database" class="level2">
<h2 class="anchored" data-anchor-id="postgresql-database">üíæ PostgreSQL Database</h2>
<p>I started out with SQLite but then I wanted a few extras that I knew weren‚Äôt built in with SQLite (particularly some types) so I just created a local Postgres database, <a href="https://github.com/strickvl/mathsprompt/blob/main/database/create_tables.sql">created the tables</a> and populated it all with some dummy data to get started.</p>
<p>Again, nothing fancy here. Four tables to hold the questions, the tags for the questions as well as metadata around how well I did when answering each question.</p>
<p>I considered hosting this online somewhere but that wasn‚Äôt necessary either and keeping everything local kept my iteration speed fast. Towards the end I refactored the Rust code to allow you to use any database you want (local or managed/hosted) so this gives me a way to put it all online should I want.</p>
</section>
</section>
<section id="which-cards-to-review" class="level1">
<h1>ü§î Which cards to review?</h1>
<p>The core bit of functionality that I wanted to make sure this enabled was the spaced repetition part. Which is to say: I mainly want to see problems for areas or topics that I know I struggle to complete the problems; I don‚Äôt want to regularly get tested on things that I am generally finding easy to complete. This is the spaced repetition way in a nutshell.</p>
<p>The way I‚Äôve coded this so far is represented by the following SQL query:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> q.<span class="kw">id</span>, q.text <span class="kw">FROM</span> questions q</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">INNER</span> <span class="kw">JOIN</span> (</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">SELECT</span> question_id, <span class="fu">AVG</span>(ease) <span class="kw">as</span> avg_ease <span class="kw">FROM</span> question_answers</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">GROUP</span> <span class="kw">BY</span> question_id</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    ) qa <span class="kw">ON</span> qa.question_id <span class="op">=</span> q.<span class="kw">id</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">WHERE</span> q.next_due <span class="op">&lt;=</span> NOW() <span class="kw">AND</span> qa.avg_ease <span class="op">&lt;=</span> <span class="dv">1</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">ORDER</span> <span class="kw">BY</span> <span class="kw">RANDOM</span>()</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">LIMIT</span> <span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Here I‚Äôm returning a random question from a set of questions where I have a low ease of answering (averaged over the particular topic area). I also don‚Äôt want to see cards that have been set to ‚Äòdue‚Äô at some point in the future.</p>
<p>It‚Äôs a super naive way of implementing what I wanted. There‚Äôs a reason <a href="https://en.wikipedia.org/wiki/Hermann_Ebbinghaus">Ebbinghaus</a> is famous for his research on the forgetting curve and there‚Äôs <a href="https://supermemo.guru/wiki/History_of_SuperMemo_algorithm">a fairly long history of people working on building out</a> from that original kernel of insight.</p>
<p>This will be one of the first things I revisit going forward. I want to be doing more than just this naive implementation. But I‚Äôll come back to that below.</p>
</section>
<section id="what-i-learned" class="level1">
<h1>üí° What I learned</h1>
<p>First and most importantly, <strong>fundamentals really matter</strong>! I wouldn‚Äôt have been able to put this together as quickly as I did without a basic understanding of how generally these kinds of things are developed. Similarly with setting up the database, without previous experience of this and getting the data layer well-grounded this would have been much more painful.</p>
<p><strong>You‚Äôll rarely regret thinking something through</strong> before you start typing / building. I wanted to start work on this a bit earlier, but the extra time I spent away from the computer designing and thinking things through was time really well spent. I‚Äôm sure this saved me time for this project.</p>
<p><strong>Rust is nice</strong>, and not as scary as people keep saying! This is probably yet another reminder to take things that people say on the internet with a pinch of salt, but there are actually really good learning materials and ways of learning Rust (like <a href="https://doc.rust-lang.org/rust-by-example/index.html">Rust By Example</a>!) such that so long as you‚Äôre not trying to implement something super complicated involving distributed process or whatever you‚Äôll probably be fine. Of course, there‚Äôs a lot of complexity that I‚Äôve just hand-waved away there, but there‚Äôs a time and a place to dive into all that in due course. Building this project gave me a feel for the workflow and put to rest any idea that developing ideas using Rust needed to be slow.</p>
<p>Truism-alert: <strong>ChatGPT-enabled coding makes you fast</strong>! Probably doesn‚Äôt even bear stating, but I was surprised how much faster it enabled me to move through the various tasks needed in this project. A combination of Copilot and ChatGPT really was a winning combination here and I was able to stay at the implementation layer instead of getting lost in syntactical details. Of course, and again, I‚Äôm sure my code could be improved, but as an experience this was one I‚Äôd be happy to repeat. As a corollary to this, it‚Äôs easy to move fast and break things with ChatGPT, but it was often clear to me that I was walking over large chasms where someone with skill and wisdom would have had a better sense of the tradeoffs being made at any particular moment. Building that up takes more time.</p>
<p>I also used the OpenAI API in conjunction with my prompt as if it‚Äôs a static API I can somehow trust. (I know we now have <a href="https://platform.openai.com/docs/guides/gpt/function-calling">Function Calling</a> but I haven‚Äôt dug into the details of that yet.) Just trusting that the LLM is going to follow the (sometimes loud and forceful) instructions of my prompt is probably a losing game. Not only is the model changing out under our feet in <a href="https://www.aisnakeoil.com/p/is-gpt-4-getting-worse-over-time">a wholly unpredictable way</a>, but different inputs might cause outputs to be in unexpected formats. For the purposes of this project it keeps me fast and nimble, but I wouldn‚Äôt want to use this in production without many (many) guardrails and safeguards. (I‚Äôm also watching the emergence of tools like <a href="https://github.com/1rgs/jsonformer">jsonformer</a> or the structured prompting of <a href="https://lmql.ai">LMQL</a> but feel it‚Äôs not quite there yet.)</p>
<p>Prompting really is an art, probably best suited to people who are creative in how they write / express themselves and not necessarily to engineers. The experimentation I did to get the model to reliably return my data in the format / way I wanted was quite fun and creative. I think I‚Äôll be sad to see this playful side of the workflow go away, buried under layers of abstraction, as seems inevitable.</p>
</section>
<section id="whats-next-for-mathsprompt" class="level1">
<h1>üßë‚Äçüíª What‚Äôs next for MathsPrompt</h1>
<p>I have bunch of things that feel like obvious next steps to take:</p>
<ul>
<li>Figuring out the spaced repetition piece. This will involve diving into the various forms the algorithm takes and implementing something that isn‚Äôt too onerous to maintain and also that doesn‚Äôt depart too far from the data schema I‚Äôve set up on the database end.</li>
<li>A stats page showing areas where I‚Äôm strong and weak. Maybe I can add some charts here as well like Anki has.</li>
<li>Improvements to the web UI. Probably it can look a bit nicer, and I can implement the ‚Äòtab‚Äô flow a bit better.</li>
<li>CLI tool. My original idea was to have this as a CLI tool but then I found the web interface easy to implement so I went down that road. I think I‚Äôd appreciate having all the same functionality in the CLI would be useful for me and shouldn‚Äôt be technically that hard.</li>
<li>PDF output. I want a way to get 3 pages full of problems, for example, so that if I‚Äôm taking a train journey I can print that out and have something to work on offline.</li>
<li>Mobile app? Alongside or as an alternative to the PDF output, I could just access the questions via a mobile app. This feels like something that would be difficult to put together (it‚Äôs a whole universe of tooling), but maybe with ChatGPT it‚Äôs an afternoon of work to hack something together?</li>
<li>Allow images in the prompt. There are some maths problems which are hard to describe just using language, so potentially I‚Äôd want to be able to include an image alongside the text. This isn‚Äôt essential, as I can already do almost everything I need without, so I imagine I won‚Äôt get round to this part.</li>
</ul>
<p>And that‚Äôs what I wanted to say about MathsPrompt for now! Feel free to <a href="https://github.com/strickvl/mathsprompt/">check out the code on my Github repository</a> and give me a star ‚≠êÔ∏è. There are instructions there if you want to spin it up yourself.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/alexstrick\.com");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://utteranc.es/client.js" repo="strickvl/mlops-dot-systems" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->




</body></html>